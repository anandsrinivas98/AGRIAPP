# ğŸ”„ Authentication Flow Diagrams

## 1. Registration & Email Verification Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     REGISTRATION FLOW                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User                    Frontend                Backend              Email Service
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚  Fill Registration     â”‚                       â”‚                      â”‚
  â”‚  Form                  â”‚                       â”‚                      â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                       â”‚                      â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚  Click "Register"      â”‚  POST /auth/register  â”‚                      â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                      â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚                        â”‚                       â”‚  Generate OTP        â”‚
  â”‚                        â”‚                       â”‚  (6 digits)          â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚                        â”‚                       â”‚  Save to DB          â”‚
  â”‚                        â”‚                       â”‚  (with expiry)       â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚                        â”‚                       â”‚  Send Email          â”‚
  â”‚                        â”‚                       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚                        â”‚  Response:            â”‚                      â”‚
  â”‚                        â”‚  requiresVerification â”‚                      â”‚
  â”‚                        â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                      â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚  Redirect to           â”‚                       â”‚                      â”‚
  â”‚  /verify-email         â”‚                       â”‚                      â”‚
  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚                      â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚  Receive Email         â”‚                       â”‚                      â”‚
  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚  with OTP              â”‚                       â”‚                      â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚  Enter OTP             â”‚                       â”‚                      â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                       â”‚                      â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚  Click "Verify"        â”‚  POST /auth/verify-email                     â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                      â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚                        â”‚                       â”‚  Validate OTP        â”‚
  â”‚                        â”‚                       â”‚  Check expiry        â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚                        â”‚                       â”‚  Update User         â”‚
  â”‚                        â”‚                       â”‚  isEmailVerified=trueâ”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚                        â”‚  Response:            â”‚                      â”‚
  â”‚                        â”‚  Success + JWT token  â”‚                      â”‚
  â”‚                        â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                      â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚  Redirect to           â”‚                       â”‚                      â”‚
  â”‚  /auth/login           â”‚                       â”‚                      â”‚
  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚                      â”‚
  â”‚                        â”‚                       â”‚                      â”‚
```

### Resend OTP Flow

```
User                    Frontend                Backend              Email Service
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚  Click "Resend OTP"    â”‚  POST /auth/resend-otp                       â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                      â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚                        â”‚                       â”‚  Generate new OTP    â”‚
  â”‚                        â”‚                       â”‚  Update DB           â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚                        â”‚                       â”‚  Send Email          â”‚
  â”‚                        â”‚                       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚                        â”‚  Response: Success    â”‚                      â”‚
  â”‚                        â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                      â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚  Show success message  â”‚                       â”‚                      â”‚
  â”‚  Start 60s countdown   â”‚                       â”‚                      â”‚
  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚                      â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚  Receive new OTP       â”‚                       â”‚                      â”‚
  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                        â”‚                       â”‚                      â”‚
```

---

## 2. Login Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          LOGIN FLOW                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User                    Frontend                Backend              Database
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚  Enter credentials     â”‚                       â”‚                      â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                       â”‚                      â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚  Click "Login"         â”‚  POST /auth/login     â”‚                      â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                      â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚                        â”‚                       â”‚  Find user by email  â”‚
  â”‚                        â”‚                       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚                        â”‚                       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚                        â”‚                       â”‚  Verify password     â”‚
  â”‚                        â”‚                       â”‚  (bcrypt compare)    â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚                        â”‚                       â”‚  Check email         â”‚
  â”‚                        â”‚                       â”‚  verification status â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚                        â”‚  Response:            â”‚                      â”‚
  â”‚                        â”‚  requiresVerification â”‚                      â”‚
  â”‚                        â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                      â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚  Redirect to           â”‚                       â”‚                      â”‚
  â”‚  /verify-email         â”‚                       â”‚                      â”‚
  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚                      â”‚
  â”‚                        â”‚                       â”‚                      â”‚

                    OR (if email verified)

  â”‚                        â”‚  Response:            â”‚                      â”‚
  â”‚                        â”‚  Success + JWT token  â”‚                      â”‚
  â”‚                        â”‚  + User data          â”‚                      â”‚
  â”‚                        â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                      â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚  Store token           â”‚                       â”‚                      â”‚
  â”‚  Update auth context   â”‚                       â”‚                      â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚  Redirect to           â”‚                       â”‚                      â”‚
  â”‚  /dashboard            â”‚                       â”‚                      â”‚
  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚                      â”‚
  â”‚                        â”‚                       â”‚                      â”‚
```

---

## 3. Forgot Password Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FORGOT PASSWORD FLOW                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User                    Frontend                Backend              Email Service
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚  Click "Forgot         â”‚                       â”‚                      â”‚
  â”‚  Password" on login    â”‚                       â”‚                      â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                       â”‚                      â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚  Navigate to           â”‚                       â”‚                      â”‚
  â”‚  /forgot-password      â”‚                       â”‚                      â”‚
  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚                      â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚  Enter email address   â”‚                       â”‚                      â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                       â”‚                      â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚  Click "Send Reset     â”‚  POST /auth/          â”‚                      â”‚
  â”‚  Link"                 â”‚  forgot-password      â”‚                      â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                      â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚                        â”‚                       â”‚  Find user by email  â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚                        â”‚                       â”‚  Generate secure     â”‚
  â”‚                        â”‚                       â”‚  reset token         â”‚
  â”‚                        â”‚                       â”‚  (32-byte hex)       â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚                        â”‚                       â”‚  Save token to DB    â”‚
  â”‚                        â”‚                       â”‚  (with 1hr expiry)   â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚                        â”‚                       â”‚  Create reset link   â”‚
  â”‚                        â”‚                       â”‚  with token          â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚                        â”‚                       â”‚  Send Email          â”‚
  â”‚                        â”‚                       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚                        â”‚  Response: Success    â”‚                      â”‚
  â”‚                        â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                      â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚  Show success message  â”‚                       â”‚                      â”‚
  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚                      â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚  Receive email with    â”‚                       â”‚                      â”‚
  â”‚  reset link            â”‚                       â”‚                      â”‚
  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                        â”‚                       â”‚                      â”‚
```

---

## 4. Reset Password Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     RESET PASSWORD FLOW                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User                    Frontend                Backend              Database
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚  Click reset link      â”‚                       â”‚                      â”‚
  â”‚  from email            â”‚                       â”‚                      â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                       â”‚                      â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚  Navigate to           â”‚                       â”‚                      â”‚
  â”‚  /reset-password       â”‚                       â”‚                      â”‚
  â”‚  ?token=xxx            â”‚                       â”‚                      â”‚
  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚                      â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚  Enter new password    â”‚                       â”‚                      â”‚
  â”‚  (with strength        â”‚                       â”‚                      â”‚
  â”‚  indicator)            â”‚                       â”‚                      â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                       â”‚                      â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚  Click "Reset          â”‚  POST /auth/          â”‚                      â”‚
  â”‚  Password"             â”‚  reset-password       â”‚                      â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                      â”‚
  â”‚                        â”‚  {token, password}    â”‚                      â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚                        â”‚                       â”‚  Find user by token  â”‚
  â”‚                        â”‚                       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚                        â”‚                       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚                        â”‚                       â”‚  Check token expiry  â”‚
  â”‚                        â”‚                       â”‚  (must be < 1 hour)  â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚                        â”‚                       â”‚  Hash new password   â”‚
  â”‚                        â”‚                       â”‚  (bcrypt)            â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚                        â”‚                       â”‚  Update password     â”‚
  â”‚                        â”‚                       â”‚  Clear reset token   â”‚
  â”‚                        â”‚                       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚                        â”‚                       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚                        â”‚  Response: Success    â”‚                      â”‚
  â”‚                        â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                      â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚  Show success message  â”‚                       â”‚                      â”‚
  â”‚  Redirect to login     â”‚                       â”‚                      â”‚
  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚                      â”‚
  â”‚                        â”‚                       â”‚                      â”‚
```

---

## 5. Protected Route Access Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   PROTECTED ROUTE ACCESS                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User                    Frontend                Backend              Middleware
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚  Access protected      â”‚                       â”‚                      â”‚
  â”‚  route (e.g. /dashboard)                       â”‚                      â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                       â”‚                      â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚                        â”‚  Check local storage  â”‚                      â”‚
  â”‚                        â”‚  for JWT token        â”‚                      â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚                        â”‚  GET /api/protected   â”‚                      â”‚
  â”‚                        â”‚  Authorization:       â”‚                      â”‚
  â”‚                        â”‚  Bearer <token>       â”‚                      â”‚
  â”‚                        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                      â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚                        â”‚                       â”‚  Auth middleware     â”‚
  â”‚                        â”‚                       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚                        â”‚                       â”‚  Verify JWT token    â”‚
  â”‚                        â”‚                       â”‚  Check expiry        â”‚
  â”‚                        â”‚                       â”‚  Extract user ID     â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚                        â”‚                       â”‚  Attach user to req  â”‚
  â”‚                        â”‚                       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚                        â”‚  Response: Data       â”‚                      â”‚
  â”‚                        â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                      â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚  Display protected     â”‚                       â”‚                      â”‚
  â”‚  content               â”‚                       â”‚                      â”‚
  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚                      â”‚
  â”‚                        â”‚                       â”‚                      â”‚

                    OR (if token invalid/expired)

  â”‚                        â”‚  Response: 401        â”‚                      â”‚
  â”‚                        â”‚  Unauthorized         â”‚                      â”‚
  â”‚                        â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                      â”‚
  â”‚                        â”‚                       â”‚                      â”‚
  â”‚  Clear local storage   â”‚                       â”‚                      â”‚
  â”‚  Redirect to login     â”‚                       â”‚                      â”‚
  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚                      â”‚
  â”‚                        â”‚                       â”‚                      â”‚
```

---

## 6. Logout Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          LOGOUT FLOW                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User                    Frontend                Backend              
  â”‚                        â”‚                       â”‚
  â”‚  Click "Logout"        â”‚                       â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                       â”‚
  â”‚                        â”‚                       â”‚
  â”‚                        â”‚  Clear JWT token      â”‚
  â”‚                        â”‚  from local storage   â”‚
  â”‚                        â”‚                       â”‚
  â”‚                        â”‚  Clear auth context   â”‚
  â”‚                        â”‚  (user state)         â”‚
  â”‚                        â”‚                       â”‚
  â”‚                        â”‚  Optional:            â”‚
  â”‚                        â”‚  POST /auth/logout    â”‚
  â”‚                        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚                        â”‚                       â”‚
  â”‚                        â”‚  Response: Success    â”‚
  â”‚                        â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                        â”‚                       â”‚
  â”‚  Redirect to           â”‚                       â”‚
  â”‚  /auth/login           â”‚                       â”‚
  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚
  â”‚                        â”‚                       â”‚
```

---

## 7. Complete User Journey

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    COMPLETE USER JOURNEY                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Register   â”‚
â”‚   New User   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Receive OTP  â”‚
â”‚   via Email  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Verify Email â”‚
â”‚  Enter OTP   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Login     â”‚
â”‚ with Creds   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Dashboard   â”‚
â”‚   (Protected)â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                 â”‚
       â–¼                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Use Features â”‚   â”‚    Logout    â”‚
â”‚   (Protected)â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
                          â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚ Back to Loginâ”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                   Forgot Password?
                          â”‚
                          â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚ Enter Email  â”‚
                   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚ Receive Link â”‚
                   â”‚  via Email   â”‚
                   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚ Reset Passwordâ”‚
                   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚ Login with   â”‚
                   â”‚ New Password â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8. Security Flow & Token Management

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SECURITY & TOKEN FLOW                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         TOKEN TYPES                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  1. JWT Token (Authentication)                                       â”‚
â”‚     - Generated on: Login, Email Verification                        â”‚
â”‚     - Expiry: 7 days                                                 â”‚
â”‚     - Storage: localStorage (frontend)                               â”‚
â”‚     - Usage: Authorization header for API requests                   â”‚
â”‚                                                                      â”‚
â”‚  2. Verification OTP (Email Verification)                            â”‚
â”‚     - Generated on: Registration, Resend OTP                         â”‚
â”‚     - Format: 6-digit number                                         â”‚
â”‚     - Expiry: 10 minutes                                             â”‚
â”‚     - Storage: Database (hashed)                                     â”‚
â”‚     - Usage: One-time email verification                             â”‚
â”‚                                                                      â”‚
â”‚  3. Reset Token (Password Reset)                                     â”‚
â”‚     - Generated on: Forgot Password request                          â”‚
â”‚     - Format: 32-byte hex string                                     â”‚
â”‚     - Expiry: 1 hour                                                 â”‚
â”‚     - Storage: Database (hashed)                                     â”‚
â”‚     - Usage: One-time password reset                                 â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      PASSWORD SECURITY                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  Registration/Reset:                                                 â”‚
â”‚    User Password â†’ bcrypt.hash(password, 12) â†’ Hashed Password      â”‚
â”‚                                                  â†“                   â”‚
â”‚                                            Store in DB               â”‚
â”‚                                                                      â”‚
â”‚  Login:                                                              â”‚
â”‚    User Password â†’ bcrypt.compare(password, hashedPassword)          â”‚
â”‚                                  â†“                                   â”‚
â”‚                            Match? â†’ Generate JWT                     â”‚
â”‚                                                                      â”‚
â”‚  Requirements:                                                       â”‚
â”‚    - Minimum 8 characters                                            â”‚
â”‚    - At least 1 uppercase letter                                     â”‚
â”‚    - At least 1 lowercase letter                                     â”‚
â”‚    - At least 1 number                                               â”‚
â”‚    - At least 1 special character                                    â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      REQUEST VALIDATION                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  Every API Request:                                                  â”‚
â”‚                                                                      â”‚
â”‚    1. Input Validation (express-validator)                           â”‚
â”‚       - Email format                                                 â”‚
â”‚       - Password strength                                            â”‚
â”‚       - Required fields                                              â”‚
â”‚                                                                      â”‚
â”‚    2. Authentication Middleware                                      â”‚
â”‚       - Extract JWT from Authorization header                        â”‚
â”‚       - Verify JWT signature                                         â”‚
â”‚       - Check expiration                                             â”‚
â”‚       - Attach user to request                                       â”‚
â”‚                                                                      â”‚
â”‚    3. Rate Limiting                                                  â”‚
â”‚       - Prevent brute force attacks                                  â”‚
â”‚       - Limit requests per IP                                        â”‚
â”‚                                                                      â”‚
â”‚    4. Error Handling                                                 â”‚
â”‚       - Sanitize error messages                                      â”‚
â”‚       - Log security events                                          â”‚
â”‚       - Return appropriate status codes                              â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 9. Error Handling Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ERROR SCENARIOS                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Registration Errors:
â”œâ”€ Email already exists â†’ 400: "Email already registered"
â”œâ”€ Invalid email format â†’ 400: "Invalid email address"
â”œâ”€ Weak password â†’ 400: "Password does not meet requirements"
â””â”€ Email service down â†’ 500: "Failed to send verification email"

Login Errors:
â”œâ”€ Invalid credentials â†’ 401: "Invalid email or password"
â”œâ”€ Email not verified â†’ 403: "Please verify your email first"
â”œâ”€ Account locked â†’ 403: "Account temporarily locked"
â””â”€ Server error â†’ 500: "Login failed, please try again"

Email Verification Errors:
â”œâ”€ Invalid OTP â†’ 400: "Invalid verification code"
â”œâ”€ Expired OTP â†’ 400: "Verification code expired"
â”œâ”€ OTP already used â†’ 400: "Verification code already used"
â””â”€ User not found â†’ 404: "User not found"

Password Reset Errors:
â”œâ”€ Invalid token â†’ 400: "Invalid or expired reset link"
â”œâ”€ Expired token â†’ 400: "Reset link expired, request new one"
â”œâ”€ Token already used â†’ 400: "Reset link already used"
â”œâ”€ User not found â†’ 404: "User not found"
â””â”€ Weak new password â†’ 400: "Password does not meet requirements"

Protected Route Errors:
â”œâ”€ No token provided â†’ 401: "Authentication required"
â”œâ”€ Invalid token â†’ 401: "Invalid authentication token"
â”œâ”€ Expired token â†’ 401: "Session expired, please login again"
â””â”€ User not found â†’ 404: "User not found"
```

---

## 10. Database State Transitions

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    USER STATE TRANSITIONS                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User Registration:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Initial State:                                                    â”‚
â”‚   - email: user@example.com                                       â”‚
â”‚   - password: <hashed>                                            â”‚
â”‚   - isEmailVerified: false                                        â”‚
â”‚   - verificationOtp: "123456"                                     â”‚
â”‚   - verificationOtpExpiry: <10 min from now>                      â”‚
â”‚   - resetToken: null                                              â”‚
â”‚   - resetTokenExpiry: null                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
                   Verify Email
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ After Verification:                                               â”‚
â”‚   - isEmailVerified: true                                         â”‚
â”‚   - verificationOtp: null                                         â”‚
â”‚   - verificationOtpExpiry: null                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
                  Forgot Password
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Reset Token Generated:                                            â”‚
â”‚   - resetToken: "<32-byte-hex>"                                   â”‚
â”‚   - resetTokenExpiry: <1 hour from now>                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
                  Reset Password
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ After Reset:                                                      â”‚
â”‚   - password: <new-hashed-password>                               â”‚
â”‚   - resetToken: null                                              â”‚
â”‚   - resetTokenExpiry: null                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Summary

This authentication system provides:

âœ… **Complete Registration Flow** with email verification  
âœ… **Secure Login** with email verification check  
âœ… **Password Reset** with secure token-based flow  
âœ… **Protected Routes** with JWT authentication  
âœ… **OTP Management** with resend capability  
âœ… **Comprehensive Error Handling** for all scenarios  
âœ… **Security Best Practices** throughout  
âœ… **Token Management** with proper expiration  
âœ… **Database State Management** with proper transitions  

All flows are production-ready and follow industry-standard security practices!